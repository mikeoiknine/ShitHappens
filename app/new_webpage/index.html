<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>ShxtHappens Map</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Custom styles for this template -->
    <link href="css/grayscale.min.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/animate.css">
	<link href="css/business-casual.css" rel="stylesheet">

  </head>

  <body id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">Pooping Station Locator</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#about">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#projects">Projects</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#signup">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Header -->
    <header class="masthead">
      <div class="container d-flex h-100 align-items-center">
        <div class="mx-auto text-center">
          <h1 class="mx-auto my-0 text-uppercase">ShxtHappens</h1>
          <h2 class="text-white-50 mx-auto mt-2 mb-5">Need to take a poop but don't know where? Don't worry bro. We gotchu.</h2>
          <a href="#about" class="btn btn-primary js-scroll-trigger">Start Pooping</a>
        </div>
      </div>
    </header>

    <!-- About Section -->
    <section id="about" class="about-section text-center">
      <div class="container" style="position:relative; overflow:hidden;">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h2 class="text-white mb-4">You're about to experience magic</h2>
            <p class="text-white-50"> You remember that time when you got stuck in Bangkok with a big urge to take a dump
              <a href="https://d2gg9evh47fn9z.cloudfront.net/800px_COLOURBOX25039649.jpg">(yeah it happens)</a>. Now, with ShxtHappens you'll never experience that again!</p>
          </div>
        </div>
		
	<div style="position:relative">
        <div id="googleMap" style="width:100%;height:400px;"></div>
		
		<div id="introText" class="intro-text left-0 text-center bg-faded p-5 rounded">
		
			<button style="position:relative; top:0px; right:0px;margin:20px;" onclick="closeDescription()">X</button>
            <h2 class="section-heading mb-4">
              <span class="section-heading-upper">Concordia Toilet</span>
              <span class="section-heading-lower">School toilet</span>
            </h2>
            <p>A very nice, ambient bathroom. No weird people here! 10/10 would poop again
            </p>
          </div>
		</div>

<script>
	function closeDescription(){
		document.getElementById("introText").classList.remove("slidein");
}
</script>

			<style>
				#iw-container {
				max-height: 50px;
}
#iw-container .iw-title {
	font-family: 'Open Sans Condensed', sans-serif;
	font-size: 13px;
	font-weight: 400;
	padding: 5px;
	background-color: #48b5e9;
	color: white;
	margin: 0;
}
#iw-container .iw-content {
	font-size: 6px;
	line-height: 7px;
	font-weight: 400;
	max-height: 60px;
}
.iw-subTitle {
	font-size: 12px;
	font-weight: 700;
	padding: 5px 0;
	margin-bottom: 8px;
}
.iw-description {
	font-size: 10px;
	font-weight: 700;
	padding: 5px 0;
}

 .intro-text {
 position:absolute;
 top:0px;right:-300px;width:300px;height:400px;transition: all ease 300ms; right:-330px;
 }

.slidein {
	right: 0;
}

.slideout {
	right: -300px;
}

			</style>
			
            <script>
                function myMap() {
				
				var markers = [];
                    var mapProp = {
                        center: new google.maps.LatLng(45.497439, -73.578991),
                        zoom: 15,
						styles: [
            {elementType: 'geometry', stylers: [{color: '#242f3e'}]},
            {elementType: 'labels.text.stroke', stylers: [{color: '#242f3e'}]},
            {elementType: 'labels.text.fill', stylers: [{color: '#746855'}]},
            {
              featureType: 'administrative.locality',
              elementType: 'labels.text.fill',
              stylers: [{color: '#d59563'}]
            },
            {
              featureType: 'poi',
              elementType: 'labels.text.fill',
              stylers: [{color: '#d59563'}]
            },
            {
              featureType: 'poi.park',
              elementType: 'geometry',
              stylers: [{color: '#263c3f'}]
            },
            {
              featureType: 'poi.park',
              elementType: 'labels.text.fill',
              stylers: [{color: '#6b9a76'}]
            },
            {
              featureType: 'road',
              elementType: 'geometry',
              stylers: [{color: '#38414e'}]
            },
            {
              featureType: 'road',
              elementType: 'geometry.stroke',
              stylers: [{color: '#212a37'}]
            },
            {
              featureType: 'road',
              elementType: 'labels.text.fill',
              stylers: [{color: '#9ca5b3'}]
            },
            {
              featureType: 'road.highway',
              elementType: 'geometry',
              stylers: [{color: '#746855'}]
            },
            {
              featureType: 'road.highway',
              elementType: 'geometry.stroke',
              stylers: [{color: '#1f2835'}]
            },
            {
              featureType: 'road.highway',
              elementType: 'labels.text.fill',
              stylers: [{color: '#f3d19c'}]
            },
            {
              featureType: 'transit',
              elementType: 'geometry',
              stylers: [{color: '#2f3948'}]
            },
            {
              featureType: 'transit.station',
              elementType: 'labels.text.fill',
              stylers: [{color: '#d59563'}]
            },
            {
              featureType: 'water',
              elementType: 'geometry',
              stylers: [{color: '#17263c'}]
            },
            {
              featureType: 'water',
              elementType: 'labels.text.fill',
              stylers: [{color: '#515c6d'}]
            },
            {
              featureType: 'water',
              elementType: 'labels.text.stroke',
              stylers: [{color: '#17263c'}]
            }
          ]
                    };


                    var map = new google.maps.Map(document.getElementById("googleMap"), mapProp);
					var poopEmoji = 'https://cdn.shopify.com/s/files/1/1061/1924/products/Poop_Emoji_7b204f05-eec6-4496-91b1-351acc03d2c7_large.png?v=1480481059'
					var image = {
							  url: poopEmoji,
							  size: new google.maps.Size(71, 71),
							  origin: new google.maps.Point(-25, 0),
							  anchor: new google.maps.Point(17, 34),
							  scaledSize: new google.maps.Size(25, 25)
							};
							
									fetch('http://fa09cf6a.ngrok.io/data/toilets').then(function(response) {
    return response.json();
  }).then(function(myJson) {
  console.log(JSON.stringify(myJson));
  Object.keys(myJson).forEach(function(k){
  var latLng = new google.maps.LatLng(myJson[k].latitude, myJson[k].longitude);
  var contentString = '<div id="iw-container">' +
                    '<div class="iw-title">' + myJson[k].title + '</div>' +
                    '<div class="iw-content">' +
                      '<div class="iw-subTitle">Poop meter score: ' + myJson[k].overall_rating + '</div>' +
					  '</input>' +
                  '</div>';
							
							 var infowindow = new google.maps.InfoWindow({
								content: contentString
							  });
			  
 marker = new google.maps.Marker({
                        map: map,
                        animation: google.maps.Animation.DROP,
                        position: latLng,
						icon: image,
						title: 'Best bathroom in town',
                    });
					
				markers.push(marker);
					
				console.log(myJson[k].latitude);
				console.log(myJson[k].longitude);
				
				marker.addListener('click', function(){
					infowindow.open(map, marker);
					document.getElementById("introText").classList.add("slidein");
					
				});
				
				
  });
});

                }
				
				postData(`http://example.com/answer`, {answer: 42})
  .then(data => console.log(JSON.stringify(data))) // JSON-string from `response.json()` call
  .catch(error => console.error(error));

function postData(url = ``, data = {}) {
  // Default options are marked with *
    return fetch(url, {
        method: "POST", // *GET, POST, PUT, DELETE, etc.
        mode: "cors", // no-cors, cors, *same-origin
        cache: "no-cache", // *default, no-cache, reload, force-cache, only-if-cached
        credentials: "same-origin", // include, *same-origin, omit
        headers: {
            "Content-Type": "application/json",
            // "Content-Type": "application/x-www-form-urlencoded",
        },
        redirect: "follow", // manual, *follow, error
        referrer: "no-referrer", // no-referrer, *client
        body: JSON.stringify(data), // body data type must match "Content-Type" header
    })
    .then(response => response.json()); // parses response to JSON
};
            </script>
			


            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDH4q3xPOAEef8GnItSGFZM6jeh3pL4BKc&callback=myMap"></script>
      </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black small text-center text-white-50">
      <div class="container">
        Copyright &copy; Your Website 2018
      </div>
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/grayscale.min.js"></script>

  </body>

</html>
